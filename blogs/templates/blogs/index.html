{% extends 'blogs/base.html' %}
{% load bootstrap4 %}


{% block page_header %}
<h2 style="display: inline;"> News Today </h2>
   <form id="search" class="input-group-append" method="get" action="{% url 'blogs:search' %}"> 
      <input type="search" class="form-control" name="query" aria-label="Search" placeholder="Search for posts and authors...">
      <input class="btn btn-outline-primary" type="submit" value="Search"/>
   </form>  
{% endblock page_header %}

{% block content %}
{% if messages %}
   <ul class="messages">
     {% for message in messages %}
         <span style="color: rgb(6, 189, 6);">{{ message }}</span>
      {% endfor %}
   </ul>
{% endif %}
<div class="my-5">
   {% if all_posts %}
      <div class="posts">
         <p> Recent posts </p> <hr> 
            {% for post in all_posts %}
               <li> <a href="{{ post.get_absolute_url }}"> {{ post.title }}</a> </li> 
            {% endfor %} 
      </div>
   {% endif %}

   <div class="container-fluid" id="maincontent">
      {% for post in posts_list %}
         <div class="mb-5 border-bottom">
            <a href="{{ post.get_absolute_url }}" style="color:blue;"> {{ post.title }} </a>  
            <div> 
               <p>{{ post.text|truncatewords:30 }}</p>
               By <b> {{ post.author.first_name|title }} {{ post.author.last_name|title }} </b>
               <br>  
               <a style="color:rgb(187, 187, 187);"> {{ post.date_added.date }} </a>
            </div>   
         </div>
      {% empty %}
         <p> There are no posts at the moment. </p>
      </div>
      {% endfor %}
   </div>

   <div class="pagination">
      <span class="step-links">
         {% if posts_list.has_previous %}
            <a href="?page=1">&laquo; First</a>
            <a href="?page={{ posts_list.previous_page_number }}">Previous</a>
         {% endif %}
         <span class="current">
            Page {{ posts_list.number }} of {{ posts_list.paginator.num_pages }}. <br>
         </span>
         {% if posts_list.has_next %}
            <a href="?page={{ posts_list.next_page_number }}">Next </a>
            <a href="?page={{ posts_list.paginator.num_pages }}"> Last &raquo;</a>
         {% endif %}
      </span>
   </div>
</div>
&ThickSpace;

<footer class="mt-5 mr-0 ml-0">
   <div class=" about bg-border text-center">   
      <p> Built with <a href="https://djangoproject.com"> Django </a> </p> <hr>
      <p> Copyright (c) 2022. All rights reserved.</p>
   </div>
</footer>
{% endblock %}
